<div class="root">
  <div class="header">
    <p>Public Gists</p>
    <app-view-toggle [(viewMode)]="viewMode" />
  </div>

  @if (loading) {
  <p>Loading gists...</p>
  } @else if (error) {
  <p class="error">{{ error }}</p>
  }

  <div [ngClass]="{ 'hidden-content': loading || error }">
    @switch (viewMode) { @case ('card') {
    <app-gist-cards
      [gists]="paginatedGists"
      [isLoggedIn]="isLoggedIn"
      (gistClick)="onGistClick($event)"
      (fork)="onForkGist($event)"
      (star)="onStarGist($event)"
    />
    } @default {
    <app-gist-table
      [gists]="paginatedGists"
      [isLoggedIn]="isLoggedIn"
      [displayedColumns]="displayedColumns"
      (gistClick)="onGistClick($event)"
      (fork)="onForkGist($event)"
      (star)="onStarGist($event)"
    />
    }}

    <mat-paginator
      [pageSize]="pageSize"
      [pageSizeOptions]="[]"
      [length]="allGists.length"
      showFirstLastButtons
    />
  </div>
</div>
